<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Mdeng li"><link href=https://mdeng1985.github.io/mkdocs/ROS/7-ROS%20Live%20Class/55-Understanding%20the%20differences%20between%20robot_state_publisher%20and%20joint_state_publisher/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-7.1.1"><title>55 Understanding the differences between robot state publisher and joint state publisher - Mdeng Li's Blog</title><link rel=stylesheet href=../../../assets/stylesheets/main.9299cb39.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ef6f36e2.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=manifest href=../../../manifest.webmanifest crossorigin=use-credentials><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","None","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#55-robot_state_publisher-joint_state_publisher class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Mdeng Li's Blog" class="md-header__button md-logo" aria-label="Mdeng Li's Blog" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Mdeng Li's Blog </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 55 Understanding the differences between robot state publisher and joint state publisher </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/mdeng1985/mkdocs title="前往 GitHub 仓库" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> mkdocs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Mdeng Li's Blog" class="md-nav__button md-logo" aria-label="Mdeng Li's Blog" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Mdeng Li's Blog </label> <div class=md-nav__source> <a href=https://github.com/mdeng1985/mkdocs title="前往 GitHub 仓库" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> mkdocs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> 首页 </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> ROS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=ROS data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> ROS </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_1 type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1> 0 ROS基本操作 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="0 ROS基本操作" data-md-level=2> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> 0 ROS基本操作 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../0-ROS%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/0-ROS%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/ class=md-nav__link> 0 ROS系统安装 </a> </li> <li class=md-nav__item> <a href=../../0-ROS%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/1-%20ROS%E7%A9%BA%E9%97%B4/ class=md-nav__link> 1 ROS空间 </a> </li> <li class=md-nav__item> <a href=../../0-ROS%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/2-ROS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/ class=md-nav__link> 2 ROS基础知识 </a> </li> <li class=md-nav__item> <a href=../../0-ROS%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/3-ROS%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/ class=md-nav__link> 3 ROS常用命令 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2> 1 实践demo <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="1 实践demo" data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> 1 实践demo </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../1-%E5%AE%9E%E8%B7%B5demo/0-turtlesim%20package%E5%AE%9E%E8%B7%B5/ class=md-nav__link> 0 turtlesim package实践 </a> </li> <li class=md-nav__item> <a href=../../1-%E5%AE%9E%E8%B7%B5demo/1-hello%E5%8A%9F%E8%83%BD%E5%8C%85/ class=md-nav__link> 1 hello功能包 </a> </li> <li class=md-nav__item> <a href=../../1-%E5%AE%9E%E8%B7%B5demo/2-%E5%8F%91%E5%B8%83%E5%92%8C%E8%AE%A2%E9%98%85%E6%B6%88%E6%81%AF/ class=md-nav__link> 2 发布和订阅消息 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> 5 gazebo <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="5 gazebo" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 5 gazebo </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../5-gazebo/0-gazebo_ros_pkgs%E5%AE%89%E8%A3%85/ class=md-nav__link> 0 gazebo ros pkgs安装 </a> </li> <li class=md-nav__item> <a href=../../5-gazebo/0-gazebo%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/ class=md-nav__link> 0 gazebo基础知识 </a> </li> <li class=md-nav__item> <a href=../../5-gazebo/0-gazebo%E9%87%8C%E7%9A%84world/ class=md-nav__link> 0 gazebo里的world </a> </li> <li class=md-nav__item> <a href=../../5-gazebo/2-gazebo%20tutorial%202%E4%B9%8BRRBot%E6%80%BB%E7%BB%93/ class=md-nav__link> 2 gazebo tutorial 2之RRBot总结 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> 6 gazebo 官方tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="6 gazebo 官方tutorials" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> 6 gazebo 官方tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4_1 type=checkbox id=__nav_2_4_1> <label class=md-nav__link for=__nav_2_4_1> Connect to ROS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Connect to ROS" data-md-level=3> <label class=md-nav__title for=__nav_2_4_1> <span class="md-nav__icon md-icon"></span> Connect to ROS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../6-gazebo%20%E5%AE%98%E6%96%B9tutorials/Connect%20to%20ROS/0-Tutorial%20Using%20roslaunch%20to%20start%20Gazebo%2C%20world%20files%20and%20URDF%20models/ class=md-nav__link> 0 Tutorial Using roslaunch to start Gazebo, world files and URDF models </a> </li> <li class=md-nav__item> <a href=../../6-gazebo%20%E5%AE%98%E6%96%B9tutorials/Connect%20to%20ROS/1-Tutorial%20Using%20a%20URDF%20in%20Gazebo/ class=md-nav__link> 1 Tutorial Using a URDF in Gazebo </a> </li> <li class=md-nav__item> <a href=../../6-gazebo%20%E5%AE%98%E6%96%B9tutorials/Connect%20to%20ROS/2-Tutorial%20Using%20Gazebo%20plugins%20with%20ROS/ class=md-nav__link> 2 Tutorial Using Gazebo plugins with ROS </a> </li> <li class=md-nav__item> <a href=../../6-gazebo%20%E5%AE%98%E6%96%B9tutorials/Connect%20to%20ROS/3-Tutorial%20ROS%20Control/ class=md-nav__link> 3 Tutorial ROS Control </a> </li> <li class=md-nav__item> <a href=../../6-gazebo%20%E5%AE%98%E6%96%B9tutorials/Connect%20to%20ROS/4-Tutorial%20ROS%20Communication/ class=md-nav__link> 4 Tutorial ROS Communication </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5 checked> <label class=md-nav__link for=__nav_2_5> 7 ROS Live Class <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="7 ROS Live Class" data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> 7 ROS Live Class </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../54-ROS%20Control%20Intro%20Build%20your%20own%20controller/ class=md-nav__link> 54 ROS Control Intro Build your own controller </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> 55 Understanding the differences between robot state publisher and joint state publisher <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> 55 Understanding the differences between robot state publisher and joint state publisher </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 这一课程的教学目的 </a> <nav class=md-nav aria-label=这一课程的教学目的> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-to-use-this-rosject class=md-nav__link> How to use this ROSject </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#0 class=md-nav__link> 0. 使用的机器人模型介绍 </a> </li> <li class=md-nav__item> <a href=#1-robot_state_publisher class=md-nav__link> 1. robot_state_publisher </a> </li> <li class=md-nav__item> <a href=#2-joint_state_publisher class=md-nav__link> 2. joint_state_publisher </a> <nav class=md-nav aria-label="2. joint_state_publisher"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-the-joint_state_publisher-gui class=md-nav__link> 2.1. The joint_state_publisher GUI </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-launching-the-simulation class=md-nav__link> 3. Launching the simulation </a> <nav class=md-nav aria-label="3. Launching the simulation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31-first-without-controllers class=md-nav__link> 3.1 First without controllers </a> </li> <li class=md-nav__item> <a href=#32-second-with-joint-controllers-but-no-joint_state_controller class=md-nav__link> 3.2 Second with joint controllers but no joint_state_controller </a> </li> <li class=md-nav__item> <a href=#33-third-with-joint-controllers-plus-joint_state_controller-and-no-joint_state_publisher class=md-nav__link> 3.3 Third, with joint controllers plus joint_state_controller and no joint_state_publisher </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 我的总结 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Markdown <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Markdown data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Markdown </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../markdown/markdown%E8%AF%AD%E6%B3%95/ class=md-nav__link> markdown语法 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> Examples <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Examples data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../markdown/examples/ class=md-nav__link> Insiders </a> </li> <li class=md-nav__item> <a href=../../../markdown/examples/abbreviations/ class=md-nav__link> Abbreviations </a> </li> <li class=md-nav__item> <a href=../../../markdown/examples/changing-the-colors/ class=md-nav__link> Changing the colors </a> </li> <li class=md-nav__item> <a href=../../../markdown/examples/getting-started/ class=md-nav__link> Getting started </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Mkdocs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Mkdocs data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Mkdocs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mkdocs/MkDocs%E7%AC%94%E8%AE%B0/ class=md-nav__link> MkDocs笔记 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> 钢琴 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=钢琴 data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> 钢琴 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../%E9%92%A2%E7%90%B4/0-%E9%92%A2%E7%90%B4%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/ class=md-nav__link> 0 钢琴基本知识 </a> </li> <li class=md-nav__item> <a href=../../../%E9%92%A2%E7%90%B4/1-%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E6%8C%87%E6%B3%95/ class=md-nav__link> 1 一些基本指法 </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 这一课程的教学目的 </a> <nav class=md-nav aria-label=这一课程的教学目的> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-to-use-this-rosject class=md-nav__link> How to use this ROSject </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#0 class=md-nav__link> 0. 使用的机器人模型介绍 </a> </li> <li class=md-nav__item> <a href=#1-robot_state_publisher class=md-nav__link> 1. robot_state_publisher </a> </li> <li class=md-nav__item> <a href=#2-joint_state_publisher class=md-nav__link> 2. joint_state_publisher </a> <nav class=md-nav aria-label="2. joint_state_publisher"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-the-joint_state_publisher-gui class=md-nav__link> 2.1. The joint_state_publisher GUI </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-launching-the-simulation class=md-nav__link> 3. Launching the simulation </a> <nav class=md-nav aria-label="3. Launching the simulation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31-first-without-controllers class=md-nav__link> 3.1 First without controllers </a> </li> <li class=md-nav__item> <a href=#32-second-with-joint-controllers-but-no-joint_state_controller class=md-nav__link> 3.2 Second with joint controllers but no joint_state_controller </a> </li> <li class=md-nav__item> <a href=#33-third-with-joint-controllers-plus-joint_state_controller-and-no-joint_state_publisher class=md-nav__link> 3.3 Third, with joint controllers plus joint_state_controller and no joint_state_publisher </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 我的总结 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=55-robot_state_publisher-joint_state_publisher>55： 理解 <em>robot_state_publisher</em> 和 *joint_state_publisher*的差异<a class=headerlink href=#55-robot_state_publisher-joint_state_publisher title="Permanent link">&para;</a></h1> <p>英文名：ROS Developers Live Class n55： ROS Control Intro: Understanding the differences between <em>robot_state_publisher</em> and <em>joint_state_publisher</em></p> <p><a href="https://www.youtube.com/watch?v=9BdAkrX4Xkg">https://www.youtube.com/watch?v=9BdAkrX4Xkg</a></p> <p>This notebook is additional material for the <strong>ROS Developers Live Class n.55</strong> created and provided for free by <strong>Ricardo Tellez</strong> of <a href=www.theconstructsim.com>The Construct</a>. You can distribute this notebook as long as you provide copy of this paragraph with it.</p> <p><a href=https://i-076c152f4690afa84.robotigniteacademy.com/e0dc1f26-2448-440c-b243-ba91a7982797/jupyter_rds/notebooks/live-class-55.ipynb#>https://i-076c152f4690afa84.robotigniteacademy.com/e0dc1f26-2448-440c-b243-ba91a7982797/jupyter_rds/notebooks/live-class-55.ipynb#</a></p> <h2 id=_1>这一课程的教学目的<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <p>如下目的：</p> <ul> <li>什么是 <strong>Robot State Publisher</strong></li> <li><strong>/joint_states topic</strong> 的功能</li> <li>什么是 <strong>Joint State Publisher</strong> </li> <li>什么时候用 <strong>Rviz**来对joint states进行可视化， 什么时候用**Gazebo</strong></li> </ul> <p>预备知识：</p> <ul> <li>Basic knowledge of <b>ROS concepts such as topics, publish and subscribe, ROS Service</b>. If you don't know about it, <a href=http://www.theconstructsim.com/construct-learn-develop-robots-using-ros/robotigniteacademy_learnros/ros-courses-library/ros-courses-ros-basics-in-5-days-c/ >check this course</a></li> <li>Basic knowledge of <strong>ROS Control</strong>. If you don't know about it, <a href=http://www.theconstructsim.com/construct-learn-develop-robots-using-ros/robotigniteacademy_learnros/ros-courses-library/ros-control-101/ >check this course</a></li> <li>Knowledge of <b>URDF format for robot definition</b>. If you don't know about it, <a href=http://www.theconstructsim.com/construct-learn-develop-robots-using-ros/robotigniteacademy_learnros/ros-courses-library/robot-creation-with-urdf/ >check this course</a>.</li> <li>Love for Robotics </li> <li>...that's it!!</li> </ul> <h3 id=how-to-use-this-rosject>How to use this ROSject<a class=headerlink href=#how-to-use-this-rosject title="Permanent link">&para;</a></h3> <p>A <a href=http://rosjects.com><strong>ROSject</strong></a> is a <strong>ROS project</strong> packaged in such a way that all the material it contains (<strong>ROS code, Gazebo simulations and Notebooks</strong>) can be shared with any body <strong>using only a web link</strong>. That is what we did with all the attendants to the Live Class, we shared this ROSject with them (so they can have access to all the ROS material they contain).</p> <p><strong>Check <a heref="https://www.youtube.com/watch?v=cR-Ow5K7oSo">this webinar</a> to learn more about ROSjects and how to create your own ROSjects</strong>.</p> <p>You will need to have a free account at the <a href=http://rosds.online>ROS Development Studio</a> (ROSDS). Get the account and then follow the indications below.</p> <h2 id=0>0. 使用的机器人模型介绍<a class=headerlink href=#0 title="Permanent link">&para;</a></h2> <p><img alt=img src=https://i.loli.net/2021/04/23/CvfPnSLqG9dcW6V.png></p> <ul> <li>The structure of this robot is defined in the URDF file</li> </ul> <div class=highlight><pre><span></span><code><span class=err>$</span> <span class=n>cat</span> <span class=n>simulation_ws</span><span class=o>/</span><span class=n>src</span><span class=o>/</span><span class=n>pi_robot</span><span class=o>/</span><span class=n>pi_robot_pkg</span><span class=o>/</span><span class=n>urdf</span><span class=o>/</span><span class=n>pi_robot_v2</span><span class=o>.</span><span class=n>urdf</span>
</code></pre></div> <ul> <li>We can load the whole structure in the param server and use it for visualization in Rviz. For that, do the following steps:</li> </ul> <p>(1) Open a Webshell (top menu, <strong>Tools-&gt;Shell</strong>)and launch a roscore on it</p> <div class=highlight><pre><span></span><code><span class=err>$</span> <span class=n>roscore</span>
</code></pre></div> <p>(2) Open another webshell and load the URDF using the following command:</p> <div class=highlight><pre><span></span><code><span class=err>$</span> <span class=n>rosparam</span> <span class=n>load</span> <span class=n>simulation_ws</span><span class=o>/</span><span class=n>src</span><span class=o>/</span><span class=n>pi_robot</span><span class=o>/</span><span class=n>pi_robot_pkg</span><span class=o>/</span><span class=n>urdf</span><span class=o>/</span><span class=n>pi_robot_v2</span><span class=o>.</span><span class=n>urdf</span> <span class=n>robot_description</span>
</code></pre></div> <p>(3) Launch Rviz and load the <strong>RobotModel</strong>. For this:</p> <ul> <li>On the previous shell launch rviz on it</li> <li>Then go to <strong>Tools-&gt;Graphical Tools</strong>. You should see there the Rviz window.</li> <li>Then, on Rviz, click on <strong>Add</strong> and select from the list the <strong>RobotModel</strong>.</li> <li>Make sure that the <strong>Fixed frame</strong> is set to <strong>base_link</strong></li> </ul> <p>You should get something like this</p> <p><img alt=img src=https://i-076c152f4690afa84.robotigniteacademy.com/e0dc1f26-2448-440c-b243-ba91a7982797/jupyter_rds/notebooks/images/rviz_error.png></p> <h2 id=1-robot_state_publisher>1. robot_state_publisher<a class=headerlink href=#1-robot_state_publisher title="Permanent link">&para;</a></h2> <p>The <strong>robot_state_publisher</strong> uses the <strong>URDF</strong> specified by the parameter <strong>robot_description</strong> and the <strong>joint positions</strong> from the <strong>topic <em>joint_states</em></strong> to calculate the forward kinematics of the robot and publish the results via <strong>tf</strong>.</p> <p>(definition from the official <a href=http://wiki.ros.org/robot_state_publisher>robot_state_publisher ROS wiki</a>).</p> <div class=highlight><pre><span></span><code><span class=nt>&lt;launch&gt;</span>
  <span class=nt>&lt;param</span> <span class=na>name=</span><span class=s>&quot;robot_description&quot;</span> <span class=na>command=</span><span class=s>&quot;cat $(find pi_robot_pkg)/urdf/pi_robot_v2.urdf&quot;</span> <span class=nt>/&gt;</span>

  <span class=c>&lt;!-- Combine joint values --&gt;</span>
  <span class=nt>&lt;node</span> <span class=na>name=</span><span class=s>&quot;robot_state_publisher&quot;</span> <span class=na>pkg=</span><span class=s>&quot;robot_state_publisher&quot;</span> <span class=na>type=</span><span class=s>&quot;state_publisher&quot;</span><span class=nt>/&gt;</span>

  <span class=c>&lt;!-- Show in Rviz --&gt;</span>
  <span class=nt>&lt;node</span> <span class=na>name=</span><span class=s>&quot;rviz&quot;</span> <span class=na>pkg=</span><span class=s>&quot;rviz&quot;</span> <span class=na>type=</span><span class=s>&quot;rviz&quot;</span> <span class=na>args=</span><span class=s>&quot;-d $(find pi_robot_pkg)/launch/pi_robot.rviz&quot;</span><span class=nt>/&gt;</span>

<span class=nt>&lt;/launch&gt;</span>
</code></pre></div> <p>Visualize in Rviz the state of the robot:</p> <p><img alt=img src=https://i-076c152f4690afa84.robotigniteacademy.com/e0dc1f26-2448-440c-b243-ba91a7982797/jupyter_rds/notebooks/images/robot_state_publisher.png></p> <p>There is nobody publishing the <em>/joint_states</em></p> <div class=highlight><pre><span></span><code>$  rostopic info /joint_states
Type: sensor_msgs/JointState

Publishers: None

Subscribers:
 * /robot_state_publisher <span class=o>(</span>http://rosds_computer:41816/<span class=o>)</span>
</code></pre></div> <p><strong>TIPS:</strong></p> <ul> <li>bear in mind that we are not launching yet any simulation of the robot!!!</li> </ul> <h2 id=2-joint_state_publisher>2. joint_state_publisher<a class=headerlink href=#2-joint_state_publisher title="Permanent link">&para;</a></h2> <p>This package publishes sensor_msgs/JointState messages for a robot. The package reads the robot_description parameter, finds all of the non-fixed joints and publishes a JointState message with all those joints defined. </p> <p>(definition from the official <a href=http://wiki.ros.org/joint_state_publisher>joint_state_publisher ROS wiki</a>).</p> <div class=highlight><pre><span></span><code><span class=nt>&lt;launch&gt;</span>
  <span class=nt>&lt;param</span> <span class=na>name=</span><span class=s>&quot;robot_description&quot;</span> <span class=na>command=</span><span class=s>&quot;cat $(find pi_robot_pkg)/urdf/pi_robot_v2.urdf&quot;</span> <span class=nt>/&gt;</span>

  <span class=c>&lt;!-- send fake joint values --&gt;</span>
  <span class=nt>&lt;node</span> <span class=na>name=</span><span class=s>&quot;joint_state_publisher&quot;</span> <span class=na>pkg=</span><span class=s>&quot;joint_state_publisher&quot;</span> <span class=na>type=</span><span class=s>&quot;joint_state_publisher&quot;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;param</span> <span class=na>name=</span><span class=s>&quot;use_gui&quot;</span> <span class=na>value=</span><span class=s>&quot;TRUE&quot;</span><span class=nt>/&gt;</span>
  <span class=nt>&lt;/node&gt;</span>

  <span class=c>&lt;!-- Combine joint values --&gt;</span>
  <span class=nt>&lt;node</span> <span class=na>name=</span><span class=s>&quot;robot_state_publisher&quot;</span> <span class=na>pkg=</span><span class=s>&quot;robot_state_publisher&quot;</span> <span class=na>type=</span><span class=s>&quot;state_publisher&quot;</span><span class=nt>/&gt;</span>

  <span class=c>&lt;!-- Show in Rviz --&gt;</span>
  <span class=nt>&lt;node</span> <span class=na>name=</span><span class=s>&quot;rviz&quot;</span> <span class=na>pkg=</span><span class=s>&quot;rviz&quot;</span> <span class=na>type=</span><span class=s>&quot;rviz&quot;</span> <span class=na>args=</span><span class=s>&quot;-d $(find pi_robot_pkg)/launch/pi_robot.rviz&quot;</span><span class=nt>/&gt;</span>

<span class=nt>&lt;/launch&gt;</span>
</code></pre></div> <p><img alt=img src=https://i.loli.net/2021/04/23/Tliy85a9O6P7zjo.png></p> <p><strong>TIPS:</strong></p> <ul> <li>bear in mind that we are not launching yet any simulation of the robot!!!</li> </ul> <p>Now, the <strong>joint_state_publisher</strong> is publishing values in the <strong>/joint_states</strong> topic. </p> <div class=highlight><pre><span></span><code>$ rostopic info /joint_states
Type: sensor_msgs/JointState

Publishers:
 * /joint_state_publisher <span class=o>(</span>http://rosds_computer:43665/<span class=o>)</span>

Subscribers:
 * /robot_state_publisher <span class=o>(</span>http://rosds_computer:38212/<span class=o>)</span>
</code></pre></div> <p>Because of that, the <strong>robot_state_publisher</strong> can build the whole robot structure.</p> <h3 id=21-the-joint_state_publisher-gui>2.1. The <em>joint_state_publisher</em> GUI<a class=headerlink href=#21-the-joint_state_publisher-gui title="Permanent link">&para;</a></h3> <p>Which values is the <strong>joint_state_publisher</strong> publishing?</p> <p>You can publish any value using the GUI</p> <p><img alt=img src=https://i.loli.net/2021/04/23/oTLkyY7Op9NXHWn.png></p> <p><strong>TIPS:</strong></p> <ul> <li><em>joint_state_publisher</em> 是用于获取robot的状态的，而不是用于驱动robot的. the <em>joint_state_publisher</em> publishes in a topic that is not for commanding the robot, but to know the status of the robot!!</li> <li>This is not a simulation!! This is just a visualization of the URDF!!</li> </ul> <p>You can use the last launch file to check if the URDF of your robot is correct, and the joints are properly position and move correctly.</p> <p>** There are no controllers here!!**</p> <h2 id=3-launching-the-simulation>3. Launching the simulation<a class=headerlink href=#3-launching-the-simulation title="Permanent link">&para;</a></h2> <h3 id=31-first-without-controllers>3.1 First without controllers<a class=headerlink href=#31-first-without-controllers title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nt>&lt;launch&gt;</span>

  <span class=nt>&lt;param</span> <span class=na>name=</span><span class=s>&quot;robot_description&quot;</span> <span class=na>command=</span><span class=s>&quot;cat $(find pi_robot_pkg)/urdf/pi_robot_v2.urdf&quot;</span> <span class=nt>/&gt;</span>

  <span class=nt>&lt;include</span> <span class=na>file=</span><span class=s>&quot;$(find pi_robot_pkg)/launch/spawn_robot_v2.launch&quot;</span><span class=nt>&gt;</span>
        <span class=nt>&lt;arg</span> <span class=na>name=</span><span class=s>&quot;urdf_robot_file&quot;</span> <span class=na>value=</span><span class=s>&quot;$(find pi_robot_pkg)/urdf/pi_robot_v2.urdf&quot;</span> <span class=nt>/&gt;</span>
        <span class=nt>&lt;arg</span> <span class=na>name=</span><span class=s>&quot;robot_name&quot;</span> <span class=na>value=</span><span class=s>&quot;pi_robot&quot;</span> <span class=nt>/&gt;</span>
    <span class=nt>&lt;/include&gt;</span>

  <span class=c>&lt;!-- Load joint controller configurations from YAML file to parameter server --&gt;</span>
  <span class=nt>&lt;rosparam</span> <span class=na>file=</span><span class=s>&quot;$(find pi_robot_pkg)/config/pirobot_control.yaml&quot;</span> <span class=na>command=</span><span class=s>&quot;load&quot;</span><span class=nt>/&gt;</span>

  <span class=c>&lt;!-- send fake joint values --&gt;</span>
  <span class=nt>&lt;node</span> <span class=na>name=</span><span class=s>&quot;joint_state_publisher&quot;</span> <span class=na>pkg=</span><span class=s>&quot;joint_state_publisher&quot;</span> <span class=na>type=</span><span class=s>&quot;joint_state_publisher&quot;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;param</span> <span class=na>name=</span><span class=s>&quot;use_gui&quot;</span> <span class=na>value=</span><span class=s>&quot;TRUE&quot;</span><span class=nt>/&gt;</span>
  <span class=nt>&lt;/node&gt;</span>

  <span class=c>&lt;!-- Combine joint values --&gt;</span>
  <span class=nt>&lt;node</span> <span class=na>name=</span><span class=s>&quot;robot_state_publisher&quot;</span> <span class=na>pkg=</span><span class=s>&quot;robot_state_publisher&quot;</span> <span class=na>type=</span><span class=s>&quot;state_publisher&quot;</span><span class=nt>/&gt;</span>

  <span class=c>&lt;!-- Show in Rviz   --&gt;</span>
  <span class=nt>&lt;node</span> <span class=na>name=</span><span class=s>&quot;rviz&quot;</span> <span class=na>pkg=</span><span class=s>&quot;rviz&quot;</span> <span class=na>type=</span><span class=s>&quot;rviz&quot;</span> <span class=na>args=</span><span class=s>&quot;-d $(find pi_robot_pkg)/launch/pi_robot.rviz&quot;</span><span class=nt>/&gt;</span>

<span class=nt>&lt;/launch&gt;</span>
</code></pre></div> <ul> <li>The robot has no control in its arms</li> <li>But the Rviz is showing proper control... why?</li> </ul> <p><img alt src=https://i.loli.net/2021/04/23/oTLkyY7Op9NXHWn.png></p> <h3 id=32-second-with-joint-controllers-but-no-joint_state_controller>3.2 Second with joint controllers but no joint_state_controller<a class=headerlink href=#32-second-with-joint-controllers-but-no-joint_state_controller title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nt>&lt;launch&gt;</span>


  <span class=nt>&lt;param</span> <span class=na>name=</span><span class=s>&quot;robot_description&quot;</span> <span class=na>command=</span><span class=s>&quot;cat $(find pi_robot_pkg)/urdf/pi_robot_v2.urdf&quot;</span> <span class=nt>/&gt;</span>

   <span class=nt>&lt;include</span> <span class=na>file=</span><span class=s>&quot;$(find pi_robot_pkg)/launch/spawn_robot_v2.launch&quot;</span><span class=nt>&gt;</span>
        <span class=nt>&lt;arg</span> <span class=na>name=</span><span class=s>&quot;urdf_robot_file&quot;</span> <span class=na>value=</span><span class=s>&quot;$(find pi_robot_pkg)/urdf/pi_robot_v2.urdf&quot;</span> <span class=nt>/&gt;</span>
        <span class=nt>&lt;arg</span> <span class=na>name=</span><span class=s>&quot;robot_name&quot;</span> <span class=na>value=</span><span class=s>&quot;pi_robot&quot;</span> <span class=nt>/&gt;</span>
    <span class=nt>&lt;/include&gt;</span>

  <span class=c>&lt;!-- Load joint controller configurations from YAML file to parameter server --&gt;</span>
  <span class=nt>&lt;rosparam</span> <span class=na>file=</span><span class=s>&quot;$(find pi_robot_pkg)/config/pirobot_control.yaml&quot;</span> <span class=na>command=</span><span class=s>&quot;load&quot;</span><span class=nt>/&gt;</span>

  <span class=c>&lt;!-- load the controllers --&gt;</span>
  <span class=nt>&lt;node</span> <span class=na>name=</span><span class=s>&quot;controller_spawner&quot;</span> <span class=na>pkg=</span><span class=s>&quot;controller_manager&quot;</span> <span class=na>type=</span><span class=s>&quot;spawner&quot;</span> <span class=na>respawn=</span><span class=s>&quot;false&quot;</span>
    <span class=na>output=</span><span class=s>&quot;screen&quot;</span> <span class=na>ns=</span><span class=s>&quot;/pi_robot&quot;</span> <span class=na>args=</span><span class=s>&quot;head_pan_joint_position_controller head_tilt_joint_position_controller torso_joint_position_controller left_shoulder_forward_joint_position_controller right_shoulder_forward_joint_position_controller left_shoulder_up_joint_position_controller right_shoulder_up_joint_position_controller left_elbow_joint_position_controller right_elbow_joint_position_controller left_wrist_joint_position_controller right_wrist_joint_position_controller&quot;</span><span class=nt>/&gt;</span>


  <span class=c>&lt;!-- send fake joint values --&gt;</span>
  <span class=nt>&lt;node</span> <span class=na>name=</span><span class=s>&quot;joint_state_publisher&quot;</span> <span class=na>pkg=</span><span class=s>&quot;joint_state_publisher&quot;</span> <span class=na>type=</span><span class=s>&quot;joint_state_publisher&quot;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;param</span> <span class=na>name=</span><span class=s>&quot;use_gui&quot;</span> <span class=na>value=</span><span class=s>&quot;TRUE&quot;</span><span class=nt>/&gt;</span>
  <span class=nt>&lt;/node&gt;</span>

  <span class=c>&lt;!-- Combine joint values --&gt;</span>
  <span class=nt>&lt;node</span> <span class=na>name=</span><span class=s>&quot;robot_state_publisher&quot;</span> <span class=na>pkg=</span><span class=s>&quot;robot_state_publisher&quot;</span> <span class=na>type=</span><span class=s>&quot;state_publisher&quot;</span><span class=nt>/&gt;</span>

  <span class=c>&lt;!-- Show in Rviz   --&gt;</span>
  <span class=nt>&lt;node</span> <span class=na>name=</span><span class=s>&quot;rviz&quot;</span> <span class=na>pkg=</span><span class=s>&quot;rviz&quot;</span> <span class=na>type=</span><span class=s>&quot;rviz&quot;</span> <span class=na>args=</span><span class=s>&quot;-d $(find pi_robot_pkg)/launch/pi_robot.rviz&quot;</span><span class=nt>/&gt;</span>

<span class=nt>&lt;/launch&gt;</span>
</code></pre></div> <ul> <li>The robot has control</li> <li>But Rviz does not show the current situation of the robot. Instead it show the one by <strong>joint_state_controller</strong></li> </ul> <p><img alt=img src=https://i.loli.net/2021/04/23/jBzFhGkMtUYemV7.png></p> <h3 id=33-third-with-joint-controllers-plus-joint_state_controller-and-no-joint_state_publisher>3.3 Third, with <em>joint controllers</em> plus <em>joint_state_controller</em> and no <em>joint_state_publisher</em><a class=headerlink href=#33-third-with-joint-controllers-plus-joint_state_controller-and-no-joint_state_publisher title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=o>&lt;</span><span class=n>launch</span><span class=o>&gt;</span>


  <span class=o>&lt;</span><span class=n>param</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;robot_description&quot;</span> <span class=n>command</span><span class=o>=</span><span class=s2>&quot;cat $(find pi_robot_pkg)/urdf/pi_robot_v2.urdf&quot;</span> <span class=o>/&gt;</span>

   <span class=o>&lt;</span><span class=n>include</span> <span class=n>file</span><span class=o>=</span><span class=s2>&quot;$(find pi_robot_pkg)/launch/spawn_robot_v2.launch&quot;</span><span class=o>&gt;</span>
        <span class=o>&lt;</span><span class=n>arg</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;urdf_robot_file&quot;</span> <span class=n>value</span><span class=o>=</span><span class=s2>&quot;$(find pi_robot_pkg)/urdf/pi_robot_v2.urdf&quot;</span> <span class=o>/&gt;</span>
        <span class=o>&lt;</span><span class=n>arg</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;robot_name&quot;</span> <span class=n>value</span><span class=o>=</span><span class=s2>&quot;pi_robot&quot;</span> <span class=o>/&gt;</span>
    <span class=o>&lt;/</span><span class=n>include</span><span class=o>&gt;</span>

  <span class=o>&lt;</span><span class=err>!</span><span class=o>--</span> <span class=n>Load</span> <span class=n>joint</span> <span class=n>controller</span> <span class=n>configurations</span> <span class=kn>from</span> <span class=nn>YAML</span> <span class=n>file</span> <span class=n>to</span> <span class=n>parameter</span> <span class=n>server</span> <span class=o>--&gt;</span>
  <span class=o>&lt;</span><span class=n>rosparam</span> <span class=n>file</span><span class=o>=</span><span class=s2>&quot;$(find pi_robot_pkg)/config/pirobot_control.yaml&quot;</span> <span class=n>command</span><span class=o>=</span><span class=s2>&quot;load&quot;</span><span class=o>/&gt;</span>

  <span class=o>&lt;</span><span class=err>!</span><span class=o>--</span> <span class=n>load</span> <span class=n>the</span> <span class=n>controllers</span> <span class=o>--&gt;</span>
  <span class=o>&lt;</span><span class=n>node</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;controller_spawner&quot;</span> <span class=n>pkg</span><span class=o>=</span><span class=s2>&quot;controller_manager&quot;</span> <span class=nb>type</span><span class=o>=</span><span class=s2>&quot;spawner&quot;</span> <span class=n>respawn</span><span class=o>=</span><span class=s2>&quot;false&quot;</span>
    <span class=n>output</span><span class=o>=</span><span class=s2>&quot;screen&quot;</span> <span class=n>ns</span><span class=o>=</span><span class=s2>&quot;/pi_robot&quot;</span> <span class=n>args</span><span class=o>=</span><span class=s2>&quot;head_pan_joint_position_controller head_tilt_joint_position_controller torso_joint_position_controller left_shoulder_forward_joint_position_controller right_shoulder_forward_joint_position_controller left_shoulder_up_joint_position_controller right_shoulder_up_joint_position_controller left_elbow_joint_position_controller right_elbow_joint_position_controller left_wrist_joint_position_controller right_wrist_joint_position_controller joint_state_controller&quot;</span><span class=o>/&gt;</span>

 <span class=o>&lt;</span><span class=err>!</span><span class=o>--</span> <span class=n>send</span> <span class=n>fake</span> <span class=n>joint</span> <span class=n>values</span> <span class=o>--&gt;</span>
  <span class=o>&lt;</span><span class=n>node</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;joint_state_publisher&quot;</span> <span class=n>pkg</span><span class=o>=</span><span class=s2>&quot;joint_state_publisher&quot;</span> <span class=nb>type</span><span class=o>=</span><span class=s2>&quot;joint_state_publisher&quot;</span><span class=o>&gt;</span>
    <span class=o>&lt;</span><span class=n>remap</span> <span class=n>from</span><span class=o>=</span><span class=s2>&quot;/joint_states&quot;</span> <span class=n>to</span><span class=o>=</span><span class=s2>&quot;/pi_robot/joint_states&quot;</span> <span class=o>/&gt;</span>
    <span class=o>&lt;</span><span class=n>param</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;use_gui&quot;</span> <span class=n>value</span><span class=o>=</span><span class=s2>&quot;TRUE&quot;</span><span class=o>/&gt;</span>
  <span class=o>&lt;/</span><span class=n>node</span><span class=o>&gt;</span>


  <span class=o>&lt;</span><span class=err>!</span><span class=o>--</span> <span class=n>convert</span> <span class=n>joint</span> <span class=n>states</span> <span class=n>to</span> <span class=n>TF</span> <span class=n>transforms</span> <span class=k>for</span> <span class=n>rviz</span><span class=p>,</span> <span class=n>etc</span> <span class=o>--&gt;</span>
  <span class=o>&lt;</span><span class=n>node</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;robot_state_publisher&quot;</span> <span class=n>pkg</span><span class=o>=</span><span class=s2>&quot;robot_state_publisher&quot;</span> <span class=nb>type</span><span class=o>=</span><span class=s2>&quot;robot_state_publisher&quot;</span>
    <span class=n>respawn</span><span class=o>=</span><span class=s2>&quot;false&quot;</span> <span class=n>output</span><span class=o>=</span><span class=s2>&quot;screen&quot;</span><span class=o>&gt;</span>
    <span class=o>&lt;</span><span class=n>remap</span> <span class=n>from</span><span class=o>=</span><span class=s2>&quot;/joint_states&quot;</span> <span class=n>to</span><span class=o>=</span><span class=s2>&quot;/pi_robot/joint_states&quot;</span> <span class=o>/&gt;</span>
  <span class=o>&lt;/</span><span class=n>node</span><span class=o>&gt;</span>

  <span class=o>&lt;</span><span class=err>!</span><span class=o>--</span> <span class=n>Show</span> <span class=ow>in</span> <span class=n>Rviz</span>   <span class=o>--&gt;</span>
  <span class=o>&lt;</span><span class=n>node</span> <span class=n>name</span><span class=o>=</span><span class=s2>&quot;rviz&quot;</span> <span class=n>pkg</span><span class=o>=</span><span class=s2>&quot;rviz&quot;</span> <span class=nb>type</span><span class=o>=</span><span class=s2>&quot;rviz&quot;</span> <span class=n>args</span><span class=o>=</span><span class=s2>&quot;-d $(find pi_robot_pkg)/launch/pi_robot.rviz&quot;</span><span class=o>/&gt;</span>

<span class=o>&lt;/</span><span class=n>launch</span><span class=o>&gt;</span>
</code></pre></div> <ul> <li>Thew robot has control</li> <li>Rviz shows the current state of the robot</li> <li><strong>joint_state_controller</strong> has no effect on the robot, nor on Rviz (well actually, there is a conflict!)</li> <li>To have effect on the joints, you must publish joint goals for each separated joint in its specific joint/command topic</li> </ul> <div class=highlight><pre><span></span><code><span class=o>/</span><span class=n>pi_robot</span><span class=o>/</span><span class=n>head_pan_joint_position_controller</span><span class=o>/</span><span class=n>command</span>
</code></pre></div> <p><img alt=img src=https://i-076c152f4690afa84.robotigniteacademy.com/e0dc1f26-2448-440c-b243-ba91a7982797/jupyter_rds/notebooks/images/3.png></p> <h2 id=_2>我的总结<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <ol> <li>rviz仅仅是可视化，而不是仿真。</li> <li>利用joint state publisher的gui可以发布joint的状态，然后robot state publisher订阅这些状态，并计算机器人的状态，最终rviz可以根据robot state publisher发布的状态对机器人进行显示更新。</li> <li>joint state publisher并不是给机器人发送状态命令，而实际上是获取机器人的joint状态。</li> <li>joint state publisher不具备控制功能。</li> </ol> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../54-ROS%20Control%20Intro%20Build%20your%20own%20controller/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 上一页 </span> 54 ROS Control Intro Build your own controller </div> </div> </a> <a href=../../../markdown/markdown%E8%AF%AD%E6%B3%95/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 下一页 </span> markdown语法 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; mdeng li </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": [], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script> <script src=../../../assets/javascripts/bundle.7353b375.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> <script src=../../../javascripts/abcjs-plugin-min.js></script> </body> </html>