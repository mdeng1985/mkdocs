<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Mdeng li"><link href=https://mdeng1985.github.io/mkdocs/ROS/6-gazebo%20%E5%AE%98%E6%96%B9tutorials/Connect%20to%20ROS/4-Tutorial%20ROS%20Communication/ rel=canonical><link rel=icon href=../../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-7.1.1"><title>4 Tutorial ROS Communication - Mdeng Li's Blog</title><link rel=stylesheet href=../../../../assets/stylesheets/main.9299cb39.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.ef6f36e2.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=manifest href=../../../../manifest.webmanifest crossorigin=use-credentials><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","None","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <script>function __prefix(e){return new URL("../../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#tutorial-ros-communication class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title="Mdeng Li's Blog" class="md-header__button md-logo" aria-label="Mdeng Li's Blog" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Mdeng Li's Blog </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 4 Tutorial ROS Communication </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/mdeng1985/mkdocs title="前往 GitHub 仓库" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> mkdocs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title="Mdeng Li's Blog" class="md-nav__button md-logo" aria-label="Mdeng Li's Blog" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> Mdeng Li's Blog </label> <div class=md-nav__source> <a href=https://github.com/mdeng1985/mkdocs title="前往 GitHub 仓库" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> mkdocs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> 首页 </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> ROS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=ROS data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> ROS </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_1 type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1> 0 ROS基本操作 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="0 ROS基本操作" data-md-level=2> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> 0 ROS基本操作 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../0-ROS%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/0-ROS%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/ class=md-nav__link> 0 ROS系统安装 </a> </li> <li class=md-nav__item> <a href=../../../0-ROS%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/1-%20ROS%E7%A9%BA%E9%97%B4/ class=md-nav__link> 1 ROS空间 </a> </li> <li class=md-nav__item> <a href=../../../0-ROS%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/2-ROS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/ class=md-nav__link> 2 ROS基础知识 </a> </li> <li class=md-nav__item> <a href=../../../0-ROS%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/3-ROS%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/ class=md-nav__link> 3 ROS常用命令 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2> 1 实践demo <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="1 实践demo" data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> 1 实践demo </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../1-%E5%AE%9E%E8%B7%B5demo/0-turtlesim%20package%E5%AE%9E%E8%B7%B5/ class=md-nav__link> 0 turtlesim package实践 </a> </li> <li class=md-nav__item> <a href=../../../1-%E5%AE%9E%E8%B7%B5demo/1-hello%E5%8A%9F%E8%83%BD%E5%8C%85/ class=md-nav__link> 1 hello功能包 </a> </li> <li class=md-nav__item> <a href=../../../1-%E5%AE%9E%E8%B7%B5demo/2-%E5%8F%91%E5%B8%83%E5%92%8C%E8%AE%A2%E9%98%85%E6%B6%88%E6%81%AF/ class=md-nav__link> 2 发布和订阅消息 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> 5 gazebo <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="5 gazebo" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 5 gazebo </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../5-gazebo/0-gazebo_ros_pkgs%E5%AE%89%E8%A3%85/ class=md-nav__link> 0 gazebo ros pkgs安装 </a> </li> <li class=md-nav__item> <a href=../../../5-gazebo/0-gazebo%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/ class=md-nav__link> 0 gazebo基础知识 </a> </li> <li class=md-nav__item> <a href=../../../5-gazebo/0-gazebo%E9%87%8C%E7%9A%84world/ class=md-nav__link> 0 gazebo里的world </a> </li> <li class=md-nav__item> <a href=../../../5-gazebo/2-gazebo%20tutorial%202%E4%B9%8BRRBot%E6%80%BB%E7%BB%93/ class=md-nav__link> 2 gazebo tutorial 2之RRBot总结 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4 checked> <label class=md-nav__link for=__nav_2_4> 6 gazebo 官方tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="6 gazebo 官方tutorials" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> 6 gazebo 官方tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4_1 type=checkbox id=__nav_2_4_1 checked> <label class=md-nav__link for=__nav_2_4_1> Connect to ROS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Connect to ROS" data-md-level=3> <label class=md-nav__title for=__nav_2_4_1> <span class="md-nav__icon md-icon"></span> Connect to ROS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../0-Tutorial%20Using%20roslaunch%20to%20start%20Gazebo%2C%20world%20files%20and%20URDF%20models/ class=md-nav__link> 0 Tutorial Using roslaunch to start Gazebo, world files and URDF models </a> </li> <li class=md-nav__item> <a href=../1-Tutorial%20Using%20a%20URDF%20in%20Gazebo/ class=md-nav__link> 1 Tutorial Using a URDF in Gazebo </a> </li> <li class=md-nav__item> <a href=../2-Tutorial%20Using%20Gazebo%20plugins%20with%20ROS/ class=md-nav__link> 2 Tutorial Using Gazebo plugins with ROS </a> </li> <li class=md-nav__item> <a href=../3-Tutorial%20ROS%20Control/ class=md-nav__link> 3 Tutorial ROS Control </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> 4 Tutorial ROS Communication <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> 4 Tutorial ROS Communication </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 前期准备 </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 相关术语 </a> </li> <li class=md-nav__item> <a href=#gazebo_ros_api_plugin class=md-nav__link> gazebo_ros_api_plugin插件 </a> </li> <li class=md-nav__item> <a href=#gazebo_ros_paths_plugin class=md-nav__link> 关于gazebo_ros_paths_plugin插件 </a> </li> <li class=md-nav__item> <a href=#gazebo class=md-nav__link> Gazebo 发布的参数 </a> <nav class=md-nav aria-label="Gazebo 发布的参数"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 查看参数值 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#gazebo_1 class=md-nav__link> Gazebo 订阅的话题 </a> <nav class=md-nav aria-label="Gazebo 订阅的话题"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 通过话题设置模型位置和姿态 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#gazebo_2 class=md-nav__link> Gazebo 发布的话题 </a> <nav class=md-nav aria-label="Gazebo 发布的话题"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#link class=md-nav__link> 利用话题查看模型和link状态 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 服务：在仿真中创建和销毁模型 </a> <nav class=md-nav aria-label=服务：在仿真中创建和销毁模型> <ul class=md-nav__list> <li class=md-nav__item> <a href=#spawn-model class=md-nav__link> Spawn Model 用法 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 删除模型 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 服务: 设置状态和属性 </a> <nav class=md-nav aria-label="服务: 设置状态和属性"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 示例 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 服务: 获取状态和属性 </a> <nav class=md-nav aria-label="服务: 获取状态和属性"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 注意 </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> 获取模型状态示例 </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> 得到仿真世界和目标的属性 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> 服务: 力控制 </a> <nav class=md-nav aria-label="服务: 力控制"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#link_1 class=md-nav__link> 对link施加力矩 </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> 对关节施加力矩 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> 服务: 仿真控制 </a> <nav class=md-nav aria-label="服务: 仿真控制"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_16 class=md-nav__link> 暂停仿真 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> 下一步 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5> 7 ROS Live Class <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="7 ROS Live Class" data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> 7 ROS Live Class </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../7-ROS%20Live%20Class/54-ROS%20Control%20Intro%20Build%20your%20own%20controller/ class=md-nav__link> 54 ROS Control Intro Build your own controller </a> </li> <li class=md-nav__item> <a href=../../../7-ROS%20Live%20Class/55-Understanding%20the%20differences%20between%20robot_state_publisher%20and%20joint_state_publisher/ class=md-nav__link> 55 Understanding the differences between robot state publisher and joint state publisher </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Markdown <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Markdown data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Markdown </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../markdown/markdown%E8%AF%AD%E6%B3%95/ class=md-nav__link> markdown语法 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> Examples <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Examples data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../markdown/examples/ class=md-nav__link> Insiders </a> </li> <li class=md-nav__item> <a href=../../../../markdown/examples/abbreviations/ class=md-nav__link> Abbreviations </a> </li> <li class=md-nav__item> <a href=../../../../markdown/examples/changing-the-colors/ class=md-nav__link> Changing the colors </a> </li> <li class=md-nav__item> <a href=../../../../markdown/examples/getting-started/ class=md-nav__link> Getting started </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Mkdocs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Mkdocs data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Mkdocs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../mkdocs/MkDocs%E7%AC%94%E8%AE%B0/ class=md-nav__link> MkDocs笔记 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> 钢琴 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=钢琴 data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> 钢琴 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../%E9%92%A2%E7%90%B4/0-%E9%92%A2%E7%90%B4%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/ class=md-nav__link> 0 钢琴基本知识 </a> </li> <li class=md-nav__item> <a href=../../../../%E9%92%A2%E7%90%B4/1-%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E6%8C%87%E6%B3%95/ class=md-nav__link> 1 一些基本指法 </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 前期准备 </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 相关术语 </a> </li> <li class=md-nav__item> <a href=#gazebo_ros_api_plugin class=md-nav__link> gazebo_ros_api_plugin插件 </a> </li> <li class=md-nav__item> <a href=#gazebo_ros_paths_plugin class=md-nav__link> 关于gazebo_ros_paths_plugin插件 </a> </li> <li class=md-nav__item> <a href=#gazebo class=md-nav__link> Gazebo 发布的参数 </a> <nav class=md-nav aria-label="Gazebo 发布的参数"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 查看参数值 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#gazebo_1 class=md-nav__link> Gazebo 订阅的话题 </a> <nav class=md-nav aria-label="Gazebo 订阅的话题"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 通过话题设置模型位置和姿态 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#gazebo_2 class=md-nav__link> Gazebo 发布的话题 </a> <nav class=md-nav aria-label="Gazebo 发布的话题"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#link class=md-nav__link> 利用话题查看模型和link状态 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 服务：在仿真中创建和销毁模型 </a> <nav class=md-nav aria-label=服务：在仿真中创建和销毁模型> <ul class=md-nav__list> <li class=md-nav__item> <a href=#spawn-model class=md-nav__link> Spawn Model 用法 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 删除模型 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 服务: 设置状态和属性 </a> <nav class=md-nav aria-label="服务: 设置状态和属性"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 示例 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 服务: 获取状态和属性 </a> <nav class=md-nav aria-label="服务: 获取状态和属性"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 注意 </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> 获取模型状态示例 </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> 得到仿真世界和目标的属性 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> 服务: 力控制 </a> <nav class=md-nav aria-label="服务: 力控制"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#link_1 class=md-nav__link> 对link施加力矩 </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> 对关节施加力矩 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> 服务: 仿真控制 </a> <nav class=md-nav aria-label="服务: 仿真控制"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_16 class=md-nav__link> 暂停仿真 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> 下一步 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=tutorial-ros-communication>Tutorial: ROS Communication<a class=headerlink href=#tutorial-ros-communication title="Permanent link">&para;</a></h1> <p>Gazebo provides a set of ROS API's that allows users to modify and get information about various aspects of the simulated world. In the following sections, we will demonstrate some of the utilities for manipulating the simulation world and objects. The complete list of ROS messages and services for gazebo can be found here also.</p> <h2 id=_1>前期准备<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <ul> <li>首先需要安装了RRBot示范例程, 见<a href="http://gazebosim.org/tutorials/?tut=ros_urdf">Using URDF in Gazebo</a>.</li> <li>确保安装了Gazebo</li> </ul> <div class=highlight><pre><span></span><code>roscore <span class=p>&amp;</span>
rosrun gazebo_ros gazebo
</code></pre></div> <h2 id=_2>相关术语<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <ul> <li>状态包括位置和姿态</li> <li>一个对象具有固有属性,比如质量和摩擦系数等</li> <li>Gazebo中的model就是通过joints将一些body连接在依靠</li> </ul> <p>In the following context, the pose and twist of a rigid body object is referred to as its '''state''. An object also has intrinsic '''properties''', such as mass and friction coefficients. In Gazebo, a '''body''' refers to a rigid body, synonymous to '''link''' in the URDF context. A Gazebo '''model''' is a conglomeration of bodies connected by '''joints'''.</p> <h2 id=gazebo_ros_api_plugin><code>gazebo_ros_api_plugin</code>插件<a class=headerlink href=#gazebo_ros_api_plugin title="Permanent link">&para;</a></h2> <p><code>gazebo_ros_api_plugin</code>位于 <code>gazebo_ros</code> 工具包内, 用于对gazebo节点初始化. 该插件只和 <code>gzserver</code>一起加载.</p> <p>它将ROS回调调度程序（消息传递）与Gazebo的内部调度程序集成在一起，以提供以下所述的ROS接口。该ROS API使用户可以在ROS上操纵仿真环境的属性，以及在环境中生成和反思模型的状态。</p> <h2 id=gazebo_ros_paths_plugin>关于<code>gazebo_ros_paths_plugin</code>插件<a class=headerlink href=#gazebo_ros_paths_plugin title="Permanent link">&para;</a></h2> <p>该<code>gazebo_ros_paths_plugin</code> 同样位于<code>gazebo_ros</code> 工具包内, 用于允许Gazebo查找ROS资源, 也即解析ROS软件包路径名. 该插件和 <code>gzserver</code> and <code>gzclient</code>一起加载.</p> <h2 id=gazebo>Gazebo 发布的参数<a class=headerlink href=#gazebo title="Permanent link">&para;</a></h2> <p>参数：</p> <ul> <li><code>/use_sim_time</code>：<code>Bool</code>-通知ROS将<code>/clock</code>发布的话题用于ROS时间。</li> </ul> <p>Gazebo uses the ROS parameter server to notify other applications, particularly Rviz, if simulation time should be used via the <code>/use_sim_time</code> parameter. This should be set automatically by Gazebo as true when you start <code>gazebo_ros</code></p> <p><code>/use_sim_time</code> is true if gazebo_ros is publishing to the ROS <code>/clock</code> topic in order to provide a ROS system with simulation-synchronized time. For more info on simulation time, see <a href=http://www.ros.org/wiki/roscpp/Overview/Time>ROS C++ Time</a>.</p> <h3 id=_3>查看参数值<a class=headerlink href=#_3 title="Permanent link">&para;</a></h3> <p>查看参数</p> <div class=highlight><pre><span></span><code>rosparam get /use_sim_time
</code></pre></div> <h2 id=gazebo_1>Gazebo 订阅的话题<a class=headerlink href=#gazebo_1 title="Permanent link">&para;</a></h2> <p>话题</p> <ul> <li> <p><code>~/set_link_state</code> : <code>gazebo_msgs/LinkState</code> - Sets the state (pose/twist) of a link.</p> </li> <li> <p><code>~/set_model_state</code> : <code>gazebo_msgs/ModelState</code> - Sets the state (pose/twist) of a model.</p> </li> </ul> <h3 id=_4>通过话题设置模型位置和姿态<a class=headerlink href=#_4 title="Permanent link">&para;</a></h3> <p><a href="https://translate.google.com/website?sl=en&tl=zh-CN&u=http://www.ros.org/wiki/Topics">主题</a>可用于快速设置模型的姿势和扭曲，而无需等待姿势设置操作完成。为此，将所需的<a href="https://translate.google.com/website?sl=en&tl=zh-CN&u=http://docs.ros.org/api/gazebo_msgs/html/msg/ModelState.html">模型状态消息</a>发布到主题。例如，要通过主题测试姿势设置，可通过从在线数据库中生成新模型来向模拟中添加可乐罐：<code>/gazebo/set_model_state</code></p> <p><a href=http://www.ros.org/wiki/Topics>Topics</a> 可用于快速设置模型的姿势和扭曲，而无需等待姿势设置操作完成。 首先可以发布一个<a href=http://docs.ros.org/api/gazebo_msgs/html/msg/ModelState.html>model state message</a>到<code>/gazebo/set_model_state</code> 话题中.</p> <p>比如,添加一个coke到仿真场景中, 然后通过发布话题的方式设置coke的位置</p> <div class=highlight><pre><span></span><code>rosrun gazebo_ros spawn_model -sdf -database coke_can  -model coke_can -y <span class=m>1</span>
rostopic pub -r <span class=m>20</span> /gazebo/set_model_state gazebo_msgs/ModelState <span class=s1>&#39;{model_name: coke_can, pose: { position: { x: 1, y: 0, z: 2 }, orientation: {x: 0, y: 0.491983115673, z: 0, w: 0.870604813099 } }, twist: { linear: { x: 0, y: 0, z: 0 }, angular: { x: 0, y: 0, z: 0}  }, reference_frame: world }&#39;</span>
</code></pre></div> <p>You should see the coke can hovering in front of the RRBot, just asking to be hit (we'll get there).</p> <p><img alt src=https://github.com/osrf/gazebo_tutorials/raw/master/ros_comm/HoverCoke.png></p> <h2 id=gazebo_2>Gazebo 发布的话题<a class=headerlink href=#gazebo_2 title="Permanent link">&para;</a></h2> <ul> <li><code>/clock</code> : <code>rosgraph_msgs/Clock</code> - 发布仿真时间, 和<code>/use_sim_time</code>参数一起使用</li> <li><code>~/link_states</code> : <code>gazebo_msgs/LinkStates</code> - 发布所有link在仿真时的状态</li> <li><code>~/model_states</code> : <code>gazebo_msgs/ModelStates</code> - 发布模型在仿真时的状态</li> </ul> <h3 id=link>利用话题查看模型和link状态<a class=headerlink href=#link title="Permanent link">&para;</a></h3> <p>Gazebo发布的 <code>/gazebo/link_states</code> and <code>/gazebo/model_states</code> 话题包含又对象在gazebo世界坐标系的位置和姿态. 可以利用如下的命令进行查看:</p> <div class=highlight><pre><span></span><code>rostopic <span class=nb>echo</span> -n <span class=m>1</span> /gazebo/model_states
rostopic <span class=nb>echo</span> -n <span class=m>1</span> /gazebo/link_states
</code></pre></div> <p>重申一下，“链接”被定义为具有给定惯性，视觉和碰撞属性的刚体。而“模型”定义为链接和关节的集合。“”模型”的状态是其规范“”链接””的状态。假定URDF强制采用树结构，则模型的规范链接由其根链接定义。</p> <h2 id=_5>服务：在仿真中创建和销毁模型<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <p>下面的services可以用于产生或者销毁模型</p> <ul> <li> <p><code>~/spawn_urdf_model</code> : <code>gazebo_msgs/SpawnModel</code> - Use this service to spawn a Universal Robotic Description Format (URDF)</p> </li> <li> <p><code>~/spawn_sdf_model</code> : <code>gazebo_msgs/SpawnModel</code> - Use this service to spawn a model written in Gazebo Simulation Description Format (SDF)</p> </li> <li> <p><code>~/delete_model</code> : <code>gazebo_msgs/DeleteModel</code> - This service allows the user to delete a model from simulation.</p> </li> </ul> <h3 id=spawn-model>Spawn Model 用法<a class=headerlink href=#spawn-model title="Permanent link">&para;</a></h3> <p>相关教程: <a href="http://gazebosim.org/tutorials/?tut=ros_roslaunch">Using roslaunch Files to Spawn Models</a></p> <p>A helper script called <code>spawn_model</code> is provided for calling the model spawning services offered by <code>gazebo_ros</code>. The most practical method for spawning a model using the service call method is with a <code>roslaunch</code> file. Details are provided in the tutorial. There are many ways to use spawn_model to add URDFs and SDFs to Gazebo. The following are a few of the examples:</p> <p>Spawn a URDF from file - first convert .xacro file to .xml then spawn:</p> <div class=highlight><pre><span></span><code>rosrun xacro xacro `rospack find rrbot_description`/urdf/rrbot.xacro &gt;&gt; `rospack find rrbot_description`/urdf/rrbot.xml
rosrun gazebo_ros spawn_model -file `rospack find rrbot_description`/urdf/rrbot.xml -urdf -y 1 -model rrbot1 -robot_namespace rrbot1
</code></pre></div> <p>URDF from parameter server using roslaunch and xacro: See <a href="http://gazebosim.org/tutorials/?tut=ros_roslaunch">Using roslaunch Files to Spawn Models</a></p> <p>SDF from local model database:</p> <div class=highlight><pre><span></span><code>rosrun gazebo_ros spawn_model -file `echo $GAZEBO_MODEL_PATH`/coke_can/model.sdf -sdf -model coke_can1 -y 0.2 -x -0.3
</code></pre></div> <p>SDF from the online model database:</p> <div class=highlight><pre><span></span><code>rosrun gazebo_ros spawn_model -database coke_can -sdf -model coke_can3 -y 2.2 -x -0.3
</code></pre></div> <p>To see all of the available arguments for <code>spawn_model</code> including namespaces, trimesh properties, joint positions and RPY orientation run:</p> <div class=highlight><pre><span></span><code>rosrun gazebo_ros spawn_model -h
</code></pre></div> <p><strong>TIPS</strong>: spwan_mode的用法 <div class=highlight><pre><span></span><code>mdeng1985@LAPTOP-T9AM7QKA:~/catkin_ws$ rosrun gazebo_ros spawn_model -h
usage: spawn_model <span class=o>[</span>-h<span class=o>]</span> <span class=o>(</span>-urdf <span class=p>|</span> -sdf<span class=o>)</span>
                   <span class=o>(</span>-file FILE_NAME <span class=p>|</span> -param PARAM_NAME <span class=p>|</span> -database MODEL_NAME <span class=p>|</span> -stdin<span class=o>)</span>
                   -model MODEL_NAME <span class=o>[</span>-reference_frame REFERENCE_FRAME<span class=o>]</span>
                   <span class=o>[</span>-gazebo_namespace GAZEBO_NAMESPACE<span class=o>]</span>
                   <span class=o>[</span>-robot_namespace ROBOT_NAMESPACE<span class=o>]</span> <span class=o>[</span>-unpause<span class=o>]</span>
                   <span class=o>[</span>-wait MODEL_NAME<span class=o>]</span> <span class=o>[</span>-x X<span class=o>]</span> <span class=o>[</span>-y Y<span class=o>]</span> <span class=o>[</span>-z Z<span class=o>]</span> <span class=o>[</span>-R R<span class=o>]</span> <span class=o>[</span>-P P<span class=o>]</span>
                   <span class=o>[</span>-Y Y<span class=o>]</span> <span class=o>[</span>-J JOINT_NAME JOINT_POSITION<span class=o>]</span> <span class=o>[</span>-package_to_model<span class=o>]</span>
                   <span class=o>[</span>-b<span class=o>]</span>

Spawn a model <span class=k>in</span> gazebo using the ROS API

optional arguments:
  -h, --help            show this <span class=nb>help</span> message and <span class=nb>exit</span>
  -urdf                 Incoming xml is <span class=k>in</span> urdf format
  -sdf                  Incoming xml is <span class=k>in</span> sdf format
  -file FILE_NAME       Load model xml from file
  -param PARAM_NAME     Load model xml from ROS parameter
  -database MODEL_NAME  Load model XML from specified model <span class=k>in</span> Gazebo Model
                        Database
  -stdin                Load model from stdin
  -model MODEL_NAME     Name of model to spawn
  -reference_frame REFERENCE_FRAME
                        Name of the model/body where initial pose is defined.
                        If left empty or specified as <span class=s2>&quot;world&quot;</span>, gazebo world
                        frame is used
  -gazebo_namespace GAZEBO_NAMESPACE
                        ROS namespace of gazebo offered ROS interfaces.
                        Defaults to /gazebo/
  -robot_namespace ROBOT_NAMESPACE
                        change ROS namespace of gazebo-plugins
  -unpause              !!!Experimental!!! unpause physics after spawning
                        model
  -wait MODEL_NAME      !!!Experimental!!! <span class=nb>wait</span> <span class=k>for</span> model to exist
  -x X                  x component of initial position, meters
  -y Y                  y component of initial position, meters
  -z Z                  z component of initial position, meters
  -R R                  roll angle of initial orientation, radians
  -P P                  pitch angle of initial orientation, radians
  -Y Y                  yaw angle of initial orientation, radians
  -J JOINT_NAME JOINT_POSITION
                        initialize the specified joint at the specified
                        position
  -package_to_model     convert urdf &lt;mesh <span class=nv>filename</span><span class=o>=</span><span class=s2>&quot;package://...&quot;</span> to &lt;mesh
                        <span class=nv>filename</span><span class=o>=</span><span class=s2>&quot;model://...&quot;</span>
  -b                    bond to gazebo and delete the model when this program
                        is interrupted
mdeng1985@LAPTOP-T9AM7QKA:~/catkin_ws$
</code></pre></div></p> <h3 id=_6>删除模型<a class=headerlink href=#_6 title="Permanent link">&para;</a></h3> <p>Deleting models that are already in Gazebo is easier as long as you know the model name you gave the object. If you spawned a rrbot named "rrbot1" as described in the previous section, you can remove it with:</p> <div class=highlight><pre><span></span><code>rosservice call gazebo/delete_model &#39;{model_name: rrbot1}&#39;
</code></pre></div> <h2 id=_7>服务: 设置状态和属性<a class=headerlink href=#_7 title="Permanent link">&para;</a></h2> <p>These services allow the user to set state and property information about simulation and objects in simulation:</p> <ul> <li> <p><code>~/set_link_properties</code> : <code>gazebo_msgs/SetLinkProperties</code></p> </li> <li> <p><code>~/set_physics_properties</code> : <code>gazebo_msgs/SetPhysicsProperties</code></p> </li> <li> <p><code>~/set_model_state</code> : <code>gazebo_msgs/SetModelState</code></p> </li> <li> <p><code>~/set_model_configuration</code> : <code>gazebo_msgs/SetModelConfiguration</code> - This service allows the user to set model joint positions without invoking dynamics.</p> </li> <li> <p><code>~/set_joint_properties</code> : gazebo_msgs/SetJointProperties`</p> </li> <li> <p><code>~/set_link_state</code> : <code>gazebo_msgs/SetLinkState</code></p> </li> <li> <p><code>~/set_link_state</code> : <code>gazebo_msgs/LinkState</code></p> </li> <li> <p><code>~/set_model_state</code> : <code>gazebo_msgs/ModelState</code></p> </li> </ul> <h3 id=_8>示例<a class=headerlink href=#_8 title="Permanent link">&para;</a></h3> <ol> <li>添加一个coke_can1模型 <div class=highlight><pre><span></span><code>rosrun gazebo_ros spawn_model -sdf -database coke_can  -model coke_can1 -y <span class=m>1</span>
</code></pre></div></li> <li> <p>设置coke_can1的状态 <div class=highlight><pre><span></span><code>rosservice call /gazebo/set_model_state <span class=s1>&#39;{model_state: { model_name: coke_can, pose: { position: { x: 0.3, y: 0.2 ,z: 0 }, orientation: {x: 0, y: 0.491983115673, z: 0, w: 0.870604813099 } }, twist: { linear: {x: 0.0 , y: 0 ,z: 0 } , angular: { x: 0.0 , y: 0 , z: 0.0 } } , reference_frame: world } }&#39;</span>
</code></pre></div></p> </li> <li> <p>驱动rrbot踢飞coke_can1 <div class=highlight><pre><span></span><code>rosservice call /gazebo/set_model_state <span class=s1>&#39;{model_state: { model_name: rrbot, pose: { position: { x: 1, y: 1 ,z: 10 }, orientation: {x: 0, y: 0.491983115673, z: 0, w: 0.870604813099 } }, twist: { linear: {x: 0.0 , y: 0 ,z: 0 } , angular: { x: 0.0 , y: 0 , z: 0.0 } } , reference_frame: world } }&#39;</span>
</code></pre></div></p> </li> </ol> <h2 id=_9>服务: 获取状态和属性<a class=headerlink href=#_9 title="Permanent link">&para;</a></h2> <ul> <li> <p><code>~/get_model_properties</code> : <code>gazebo_msgs/GetModelProperties</code>- This service returns the properties of a model in simulation.</p> </li> <li> <p><code>~/get_model_state</code> : <code>gazebo_msgs/GetModelState</code> - This service returns the states of a model in simulation.</p> </li> <li> <p><code>~/get_world_properties</code> : <code>gazebo_msgs/GetWorldProperties</code> - This service returns the properties of the simulation world.</p> </li> <li> <p><code>~/get_joint_properties</code> : <code>gazebo_msgs/GetJointProperties</code> - This service returns the properties of a joint in simulation.</p> </li> <li> <p><code>~/get_link_properties</code> : <code>gazebo_msgs/GetLinkProperties</code> - This service returns the properties of a link in simulation.</p> </li> <li> <p><code>~/get_link_state</code> : <code>gazebo_msgs/GetLinkState</code> - This service returns the states of a link in simulation.</p> </li> <li> <p><code>~/get_physics_properties</code> : <code>gazebo_msgs/GetPhysicsProperties</code> - This service returns the properties of the physics engine used in simulation.</p> </li> <li> <p><code>~/link_states</code> : <code>gazebo_msgs/LinkStates</code> - Publish complete link states in world frame</p> </li> <li> <p><code>~/model_states</code> : <code>gazebo_msgs/ModelStates</code> - Publish complete model states in world frame</p> </li> </ul> <h3 id=_10>注意<a class=headerlink href=#_10 title="Permanent link">&para;</a></h3> <p><code>link_names</code> are in gazebo scoped name notation, <code>[model_name::body_name]</code></p> <h3 id=_11>获取模型状态示例<a class=headerlink href=#_11 title="Permanent link">&para;</a></h3> <p>要得到刚才踢走的可乐瓶状态</p> <div class=highlight><pre><span></span><code>rosservice call gazebo/get_model_state &#39;{model_name: coke_can}&#39;
</code></pre></div> <p>可以得到类似如下的信息</p> <div class=highlight><pre><span></span><code>pose:
  position:
    x: -10.3172263825
    y: -1.95098702647
    z: -0.00413857755159
  orientation:
    x: -0.0218349987011
    y: -0.00515029763403
    z: 0.545795377598
    w: 0.83761811887
twist:
  linear:
    x: -0.000385525262354
    y: -0.000344915539911
    z: -0.00206406538336
  angular:
    x: -0.104256200218
    y: 0.0370371098566
    z: 0.0132837766211
success: True
</code></pre></div> <h3 id=_12>得到仿真世界和目标的属性<a class=headerlink href=#_12 title="Permanent link">&para;</a></h3> <p>You can get a list of models (ground_plane, coke cane, rrbot) in the world by running:</p> <div class=highlight><pre><span></span><code>rosservice call gazebo/get_world_properties
</code></pre></div> <div class=highlight><pre><span></span><code>sim_time: 1013.366
model_names: [&#39;ground_plane&#39;, &#39;rrbot&#39;, &#39;coke_can&#39;]
rendering_enabled: True
success: True
status_message: GetWorldProperties: got properties
</code></pre></div> <p>and retrieve details of a specific model by</p> <div class=highlight><pre><span></span><code>rosservice call gazebo/get_model_properties &#39;{model_name: rrbot}&#39;
</code></pre></div> <div class=highlight><pre><span></span><code>parent_model_name: &#39;&#39;
canonical_body_name: &#39;&#39;
body_names: [&#39;link1&#39;, &#39;link2&#39;, &#39;link3&#39;]
geom_names: [&#39;link1_geom&#39;, &#39;link2_geom&#39;, &#39;link3_geom&#39;, &#39;link3_geom_camera_link&#39;, &#39;link3_geom_hokuyo_link&#39;]
joint_names: [&#39;fixed&#39;, &#39;joint1&#39;, &#39;joint2&#39;]
child_model_names: []
is_static: False
success: True
status_message: GetModelProperties: got properties
</code></pre></div> <h2 id=_13>服务: 力控制<a class=headerlink href=#_13 title="Permanent link">&para;</a></h2> <ul> <li> <p><code>~/apply_body_wrench</code> : <code>gazebo_msgs/ApplyBodyWrench</code> - Apply wrench to a body in simulation. All active wrenches applied to the same body are cumulative.</p> </li> <li> <p><code>~/apply_joint_effort</code> : <code>gazebo_msgs/ApplyJointEffort</code> - Apply effort to a joint in simulation. All active efforts applied to the same joint are cumulative.</p> </li> <li> <p><code>~/clear_joint_forces</code> : <code>gazebo_msgs/JointRequest</code> - Clear applied efforts to a joint.</p> </li> <li> <p><code>~/clear_body_wrenches</code> : <code>gazebo_msgs/ClearBodyWrenches</code> - Clear applied wrench to a body.</p> </li> </ul> <h3 id=link_1>对link施加力矩<a class=headerlink href=#link_1 title="Permanent link">&para;</a></h3> <ul> <li> <p>首先把前面的可乐对象删除了 <div class=highlight><pre><span></span><code>rosservice call gazebo/delete_model <span class=s1>&#39;{model_name: coke_can}&#39;</span>
rosservice call gazebo/delete_model <span class=s1>&#39;{model_name: coke_can1}&#39;</span>
</code></pre></div></p> </li> <li> <p>添加新的可乐对象 <div class=highlight><pre><span></span><code>rosrun gazebo_ros spawn_model -sdf -database coke_can  -model coke_can -y <span class=m>1</span>
</code></pre></div></p> </li> <li>给o <code>/gazebo/set_physics_properties</code>发送一个服务, 关闭引力</li> </ul> <div class=highlight><pre><span></span><code>rosservice call /gazebo/set_physics_properties &quot;
time_step: 0.001
max_update_rate: 1000.0
gravity:
  x: 0.0
  y: 0.0
  z: 0.0
ode_config:
  auto_disable_bodies: False
  sor_pgs_precon_iters: 0
  sor_pgs_iters: 50
  sor_pgs_w: 1.3
  sor_pgs_rms_error_tol: 0.0
  contact_surface_layer: 0.001
  contact_max_correcting_vel: 100.0
  cfm: 0.0
  erp: 0.2
  max_contacts: 20&quot;
</code></pre></div> <ul> <li> <p>调用<code>/gazebo/apply_body_wrench</code> 服务,给可乐施加0.01 Nm的扭矩，持续1秒钟，您将看到可乐罐沿x轴正方向旋转： <div class=highlight><pre><span></span><code>rosservice call /gazebo/apply_body_wrench &#39;{body_name: &quot;coke_can::link&quot; , wrench: { torque: { x: 0.01, y: 0 , z: 0 } }, start_time: 10000000000, duration: 1000000000 }&#39;
</code></pre></div></p> </li> <li> <p>施加负向力矩</p> </li> <li> <p>清除力矩 <div class=highlight><pre><span></span><code>rosservice call /gazebo/clear_body_wrenches &#39;{body_name: &quot;coke_can::link&quot;}&#39;
</code></pre></div></p> </li> </ul> <h3 id=_14>对关节施加力矩<a class=headerlink href=#_14 title="Permanent link">&para;</a></h3> <p>Call <code>/gazebo/apply_joint_effort</code> to apply torque to the joint</p> <div class=highlight><pre><span></span><code>rosservice call /gazebo/apply_joint_effort &quot;joint_name: &#39;joint2&#39;
effort: 10.0
start_time:
  secs: 0
  nsecs: 0
duration:
  secs: 10
  nsecs: 0&quot;
</code></pre></div> <p>清除力矩: </p> <div class=highlight><pre><span></span><code>rosservice call /gazebo/clear_joint_forces &#39;{joint_name: joint2}&#39;
</code></pre></div> <h2 id=_15>服务: 仿真控制<a class=headerlink href=#_15 title="Permanent link">&para;</a></h2> <p>These services allow the user to pause and unpause physics in simulation:</p> <p><code>~/pause_physics</code> : <code>std_srvs/Empty</code> - Pause physics updates.</p> <p><code>~/unpause_physics</code> : <code>std_srvs/Empty</code> - Resume physics updates.</p> <p><code>~/reset_simulation</code> : <code>std_srvs/Empty</code> - Resets the entire simulation including the time</p> <p><code>~/reset_world</code> : <code>std_srvs/Empty</code> - Resets the model's poses</p> <h3 id=_16>暂停仿真<a class=headerlink href=#_16 title="Permanent link">&para;</a></h3> <p>Say you want to get a good screenshot of your soda can flying in the air. You can pause the physics engine by calling:</p> <div class=highlight><pre><span></span><code>rosservice call gazebo/pause_physics
</code></pre></div> <p>When simulation is paused, simulation time is stopped and objects become static. However, Gazebo's internal update loop (such as custom dynamic plugin updates) are still running, but given that the simulation time is not changing, anything throttled by simulation time will not update. To resume simulation, unpause the physic engine by calling:</p> <div class=highlight><pre><span></span><code>rosservice call gazebo/unpause_physics
</code></pre></div> <h2 id=_17>下一步<a class=headerlink href=#_17 title="Permanent link">&para;</a></h2> <p>Learn how to create custom <a href="http://gazebosim.org/tutorials/?tut=ros_plugins">ROS plugins for Gazebo</a>.</p> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../3-Tutorial%20ROS%20Control/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 上一页 </span> 3 Tutorial ROS Control </div> </div> </a> <a href=../../../7-ROS%20Live%20Class/54-ROS%20Control%20Intro%20Build%20your%20own%20controller/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> 下一页 </span> 54 ROS Control Intro Build your own controller </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; mdeng li </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": [], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script> <script src=../../../../assets/javascripts/bundle.7353b375.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> <script src=../../../../javascripts/abcjs-plugin-min.js></script> </body> </html>