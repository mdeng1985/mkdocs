<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Mdeng li"><link href=https://mdeng1985.github.io/mkdocs/2-%E5%85%B7%E4%BD%93%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/linux/6-linux%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E8%BF%9E%E6%8E%A5/ rel=canonical><link rel=icon href=../../../assets/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-7.1.1"><title>linux远程桌面连接 - Mdeng Li's Blog</title><link rel=stylesheet href=../../../assets/stylesheets/main.9299cb39.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ef6f36e2.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","None","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#linux class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Mdeng Li's Blog" class="md-header__button md-logo" aria-label="Mdeng Li's Blog" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Mdeng Li's Blog </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> linux远程桌面连接 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/squidfunk/mkdocs title="前往 GitHub 仓库" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> mkdocs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../mkdocs_src/ class=md-tabs__link> 首页 </a> </li> <li class=md-tabs__item> <a href=../../../mkdocs_src/getting-started/ class=md-tabs__link> 兴趣 </a> </li> <li class=md-tabs__item> <a href=../../../mkdocs_src/setup/changing-the-colors/ class=md-tabs__link> 工作 </a> </li> <li class=md-tabs__item> <a href=../../../mkdocs_src/reference/abbreviations/ class=md-tabs__link> 办公 </a> </li> <li class=md-tabs__item> <a href=../../../mkdocs_src/insiders/ class=md-tabs__link> Insiders </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Mdeng Li's Blog" class="md-nav__button md-logo" aria-label="Mdeng Li's Blog" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> Mdeng Li's Blog </label> <div class=md-nav__source> <a href=https://github.com/squidfunk/mkdocs title="前往 GitHub 仓库" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> mkdocs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mkdocs_src/ class=md-nav__link> 首页 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> 兴趣 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=兴趣 data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> 兴趣 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mkdocs_src/getting-started/ class=md-nav__link> Installation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> 工作 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=工作 data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> 工作 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mkdocs_src/setup/changing-the-colors/ class=md-nav__link> Changing the colors </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> 办公 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=办公 data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> 办公 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mkdocs_src/reference/abbreviations/ class=md-nav__link> Abbreviations </a> </li> <li class=md-nav__item> <a href=../../../mkdocs_src/mkdocs%E8%AF%AD%E6%B3%95/ class=md-nav__link> mkdocs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Insiders <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Insiders data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Insiders </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mkdocs_src/insiders/ class=md-nav__link> Sponsorship </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 标签 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=linux>linux远程桌面连接<a class=headerlink href=#linux title="Permanent link">&para;</a></h1> <h2 id=_1>标签<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <h1 id=raspberrry-remote-control-vnc-linux>raspberrry #remote-control #vnc #linux<a class=headerlink href=#raspberrry-remote-control-vnc-linux title="Permanent link">&para;</a></h1> <h2 id=xfc4xrdp>xfc4+xrdp的方式<a class=headerlink href=#xfc4xrdp title="Permanent link">&para;</a></h2> <ul> <li> <p>安装xfc4轻量级桌面环境: <code>sudo apt-get install xfce4 -y</code></p> </li> <li> <p>安装xrdp（an open-source Remote Desktop Protocol server）：<code>sudo apt-get install xrdp -y</code></p> </li> <li> <p>启动xrdp：<code>sudo service xrdp start</code></p> </li> <li> <p>设置端口: <code>sudo sed -i 's/port=3389/port=3390/g' /etc/xrdp/xrdp.ini</code></p> </li> <li> <p>向.xsession中写入xfce4-session:<code>sudo echo xfce4-session &gt;~/.xsession</code>。如果显示permission deined,则直接<code>sudo vim /home/mdeng/.xsession</code>进入到<code>.xsession</code>文件里，把<code>xfce4-session</code>输入进去保存就可以了。</p> </li> <li> <p>重启xrdp服务<code>sudo service xrdp restart</code></p> </li> <li> <p>查看ip: <code>ifconfig</code> ： eth0对应的那个ip</p> </li> <li> <p>远程登录: 172.20.9.229:3390</p> </li> </ul> <p>登录以后在apperance--setting里设置字体大小</p> <p>参考资料：<a href=https://www.cnblogs.com/Jimc/p/10303951.html>https://www.cnblogs.com/Jimc/p/10303951.html</a> <a href=https://askubuntu.com/questions/993225/whats-the-easiest-way-to-run-gui-apps-on-windows-subsystem-for-linux-as-of-2018>https://askubuntu.com/questions/993225/whats-the-easiest-way-to-run-gui-apps-on-windows-subsystem-for-linux-as-of-2018</a></p> <h2 id=x11vnc>x11vnc （推荐，适用树莓派）<a class=headerlink href=#x11vnc title="Permanent link">&para;</a></h2> <ol> <li>首选需要确认下<code>/etc/net-plan</code>里的配置文件删除了wlan0的配置项，见[[1-树莓派系统安装与基本配置#上网设置]]。（不这么做好像也可以）</li> <li><code>sudo apt-get install lightdm</code> (如果gdm则有问题)</li> <li><code>dpkg-reconfigure lightdm</code>配置成lightdm</li> <li>首先安装x11vnc: <code>$ sudo apt-get install x11vnc</code></li> <li>设置登录密码，如果不设置密码，会导致任意人都可以登录 <div class=highlight><pre><span></span><code>    <span class=n>$</span> <span class=n>sudo</span> <span class=n>x11vnc</span> <span class=o>-</span><span class=n>storepasswd</span> <span class=o>/</span><span class=n>etc</span><span class=o>/</span><span class=n>x11vnc</span><span class=p>.</span><span class=n>pass</span>
</code></pre></div> 我设置为h...1..1</li> <li> <p>设置端口 <div class=highlight><pre><span></span><code><span class=n>$</span> <span class=n>sudo</span> <span class=n>x11vnc</span> <span class=o>-</span><span class=n>auth</span> <span class=n>guess</span> <span class=o>-</span><span class=n>rfbauth</span> <span class=o>/</span><span class=n>etc</span><span class=o>/</span><span class=n>x11vnc</span><span class=p>.</span><span class=n>pass</span> <span class=o>-</span><span class=n>rfbport</span> <span class=mi>5900</span> <span class=o>-</span><span class=n>forever</span> <span class=o>-</span><span class=nl>display</span> <span class=p>:</span><span class=mi>0</span>
</code></pre></div> '-rfbport' 参数指定监听端口，'-forever' 参数指定客户端断开后不要停止服务而是继续等待下一次的连接请求 '-rfbauth' 参数指定验证密码的存储文件 这时候如果提示找不到<code>display :0</code>，这是因为树莓派连接显示器造成的。这需要安装一个虚拟显示器。</p> </li> <li> <p>安装虚拟显示器并配置： <div class=highlight><pre><span></span><code>    sudo apt-get install  xserver-xorg-core
    sudo apt-get install  xserver-xorg-video-dummy
    sudo find / -name &quot;xorg.conf.d&quot;
</code></pre></div> 返回路径为<code>/usr/share/X11/xorg.conf.d</code>，则编辑<code>cd /usr/share/X11/xorg.conf.d/xorg.conf</code>，内容如下： <div class=highlight><pre><span></span><code>    Section &quot;Device&quot;
        Identifier  &quot;Configured Video Device&quot;
        Driver      &quot;dummy&quot;
    EndSection

    Section &quot;Monitor&quot;
        Identifier  &quot;Configured Monitor&quot;
        HorizSync 31.5-48.5
        VertRefresh 50-70
    EndSection

    Section &quot;Screen&quot;
        Identifier  &quot;Default Screen&quot;
        Monitor     &quot;Configured Monitor&quot;
        Device      &quot;Configured Video Device&quot;
        DefaultDepth 24
        SubSection &quot;Display&quot;
        Depth 24
        Modes &quot;1280x720&quot;
        EndSubSection
    EndSection
</code></pre></div> 重启即可。see: <a href=https://blog.csdn.net/qq_43242727/article/details/105360523>kali linux树莓派配置踩坑之旅③ x11vnc 真·窗口可视化</a></p> </li> <li> <p>编辑服务文件<code>sudo nano /etc/systemd/system/x11vnc.service</code>内容如下 <div class=highlight><pre><span></span><code>[Unit]
Description=x11vnc (Remote access)
After=network-online.target

[Service]
Type=simple
ExecStart=/usr/bin/x11vnc -auth guess -rfbauth /etc/x11vnc.pass -rfbport 5900 -forever -display :0
ExecStop=/bin/kill -TERM $MAINPID
ExecReload=/bin/kill -HUP $MAINPID
KillMode=control-group
Restart=on-failure

[Install]
WantedBy=graphical.target
</code></pre></div> 9.启动服务 <div class=highlight><pre><span></span><code>    $ sudo systemctl daemon-reload
    $ sudo systemctl start x11vnc
</code></pre></div></p> </li> <li> <p>windows下下载tiny vncviewer，然后连接<code>192.168.0.152:5900</code>，密码为我设置的<code>h...1</code>登录进去，测试下 <div class=highlight><pre><span></span><code>roscore（终端1）
rosrun rviz rviz （终端2）
</code></pre></div></p> </li> </ol> <p>下次开机后直接运行<code>sudo systemctl start x11vnc</code>即可。</p> <p>如果是设置分辨率，vnc进去以后，用bash设置<code>xrandr --fb 1920x1080</code></p> <p>如果要每次开机自动开启服务的话，设置如下 (测试不管用)</p> <p>4：sudo x11vnc -storepasswd in /etc/x11vnc.pass</p> <p>5：sudo cp ~/.vnc/passwd /etc/x11vnc.pass （认为你是非root的其它管理员）</p> <p>6：sudo vim /etc/init/x11vnc.conf （如果没有这个文件则创建一个）</p> <p>7：把以下代码复制到x11vnc.conf（这样你就不用每次都要去手动启用了）</p> <div class=highlight><pre><span></span><code>start on login-session-start
script
x11vnc -display :0 -auth /var/run/lightdm/root/:0 -forever -bg -o /var/log/x11vnc.log -rfbauth /etc/x11vnc.pass -rfbport 5900
end script
</code></pre></div> <p>参考文献： <a href=https://www.mobibrw.com/2019/19379>ubuntu 16.04/18.04配置远程桌面访问</a> <a href=https://blog.csdn.net/jnbbwyth/article/details/38390167>关于x11vnc在ubuntu14.04服务器版上开启远程桌面的使用(作为自己备忘)</a></p> <div class=highlight><pre><span></span><code># ubuntu 18.04 默认使用gdm3，导致VNC工作异常，需要切换到 lightdm 
# ubuntu 16.04 默认使用 lightdm 因此一般不需要调整
$ sudo apt install lightdm
</code></pre></div> <h2 id=ubuntu-server-2000>ubuntu server 20.00自带的屏幕共享<a class=headerlink href=#ubuntu-server-2000 title="Permanent link">&para;</a></h2> <p>首选需要确认下<code>/etc/net-plan</code>里的配置文件删除了wlan0的配置项，见[[1-树莓派系统安装与基本配置#上网设置]]。</p> <p>进入桌面环境-setting-share设置屏幕共享即可，默认的端口为5900</p> <h2 id=wsl>wsl下的图形显示<a class=headerlink href=#wsl title="Permanent link">&para;</a></h2> <p><strong>注意有三种方式</strong> - mobaxterm ^b3dd43 - xming - vcxsrv</p> <p><strong>20210401</strong> 更新:目前在wsl2下是采用mobaxterm的方法.</p> <h3 id=mobaxterm>安装MobaXterm<a class=headerlink href=#mobaxterm title="Permanent link">&para;</a></h3> <p>该软件的好处是能够显示ros的rviz、小海龟，且能够开好几个终端</p> <p>参考资料：</p> <ul> <li> <p><a href=https://medium.com/@lixis630/extra-setup-on-wsl-for-ros-7c539463370a>Extra setup on WSL for ROS</a></p> </li> <li> <p><a href=https://www.jianshu.com/p/1a2fb7c78f9f>ROS 基础学习笔记1——Windows WSL安装ROS</a></p> </li> <li> <p>首先下载MobaXterm, 并安装打开软件</p> </li> <li> <p>点击settings，然后</p> <ul> <li> <p>Full X11 remote access</p> </li> <li> <p>Display offset: default is 0, you can also use 0</p> </li> <li> <p>Disable extension RANDR: otherwise RViz cannot be launched due to some errors</p> </li> </ul> </li> <li> <p>双击WSL-ubuntu的终端，可以看到DISPLAY的IP和端口，如下</p> </li> <li> <p>设置DISPLAY环境变量<code>export DISPLAY=192.168.1.105:0.0</code></p> </li> <li> <p><code>echo $DISPLAY</code>确保环境变量设置正确。</p> </li> <li> <p>运行<code>rosrun rviz rviz</code>看看能不能正常显示（前提是在wsl2上安装了ros）</p> </li> </ul> <p>如果显示ｇａｚｅｂｏ则需要设置GAZEBO_IP:</p> <ul> <li>首先查看<code>gazebo --verbose</code></li> </ul> <div class=highlight><pre><span></span><code>Gazebo multi-robot simulator, version <span class=m>9</span>.0.0
Copyright <span class=o>(</span>C<span class=o>)</span> <span class=m>2012</span> Open Source Robotics Foundation.
Released under the Apache <span class=m>2</span> License.
http://gazebosim.org

<span class=o>[</span>Msg<span class=o>]</span> Waiting <span class=k>for</span> master.
<span class=o>[</span>Msg<span class=o>]</span> Connected to gazebo master @ http://127.0.0.1:11345
<span class=o>[</span>Msg<span class=o>]</span> Publicized address: <span class=m>127</span>.0.0.1
Gazebo multi-robot simulator, version <span class=m>9</span>.0.0
Copyright <span class=o>(</span>C<span class=o>)</span> <span class=m>2012</span> Open Source Robotics Foundation.
Released under the Apache <span class=m>2</span> License.
http://gazebosim.org

<span class=o>[</span>Msg<span class=o>]</span> Waiting <span class=k>for</span> master.
<span class=o>[</span>Msg<span class=o>]</span> Connected to gazebo master @ http://127.0.0.1:11345
<span class=o>[</span>Msg<span class=o>]</span> Publicized address: <span class=m>127</span>.0.0.1
</code></pre></div> <ul> <li>如果Publicized address的IP和master的IP不一致,则需要设置GAZEBO_IP</li> </ul> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>GAZEBO_IP</span><span class=o>=</span><span class=m>127</span>.0.0.1
<span class=nv>LIBGL_ALWAYS_INDIRECT</span><span class=o>=</span><span class=m>0</span>
<span class=nb>echo</span> <span class=nv>$GAZEBO_IP</span>
</code></pre></div> <p><a href=https://iamncj.github.io/2020/02/20/2020-02-20_ROS_WSL/ >https://iamncj.github.io/2020/02/20/2020-02-20_ROS_WSL/</a></p> <p><strong>总结</strong>:</p> <p><code>bash export DISPLAY=192.168.1.105:0.0 export GAZEBO_IP=127.0.0.1 LIBGL_ALWAYS_INDIRECT=0 echo $GAZEBO_IP</code></p> <h3 id=xming>xming图形化显示<a class=headerlink href=#xming title="Permanent link">&para;</a></h3> <p>^1d69bc</p> <p>参考资料<code>Install Ubuntu on Win10.txt</code></p> <p>首先设置在wsl下显示GUI</p> <ol> <li> <p>windows下载并安装Xming from SourceForge.net</p> </li> <li> <p>打开Xming看显示的server是啥，我的是0.0</p> </li> <li> <p>wsl下安装xterm, <code>sudo apt-get xterm</code></p> </li> <li> <p>测试：DISPLAY=:0 gvim #check that opens a xming display window</p> </li> <li>如果是运行ros，则一个终端输入roslaunch, 另外一个终端输入<code>DISPLAY=:0 rosrun rviz rviz</code></li> </ol> <h3 id=vcxsrv>vcxsrv图形显示<a class=headerlink href=#vcxsrv title="Permanent link">&para;</a></h3> <p>^dc0292</p> <p>参考资料：<a href="https://www.youtube.com/watch?v=DW7l9LHdK5c">https://www.youtube.com/watch?v=DW7l9LHdK5c</a> # How to run Gazebo + RVIZ on Windows 10 using WSL2 <a href=https://janbernloehr.de/2017/06/10/ros-windows>https://janbernloehr.de/2017/06/10/ros-windows</a></p> <p>安装vcxsrv，参考资料<a href=https://blog.csdn.net/u011138447/article/details/78262369>https://blog.csdn.net/u011138447/article/details/78262369</a></p> <h4 id=_2>以常规模式运行<a class=headerlink href=#_2 title="Permanent link">&para;</a></h4> <ul> <li> <p>以管理员模式启动xlaunch,设置如下：</p> <ul> <li> <p>a large window</p> </li> <li> <p>窗口数为0.0</p> </li> <li> <p>navtive opengl不要选</p> </li> </ul> </li> <li> <p>bash下的操作： <div class=highlight><pre><span></span><code>  <span class=nb>export</span> <span class=nv>GAZEBO_IP</span><span class=o>=</span><span class=m>127</span>.0.0.1
  <span class=nb>export</span> <span class=nv>DISPLAY</span><span class=o>=</span><span class=k>$(</span>cat /etc/resolv.conf <span class=p>|</span> grep nameserver <span class=p>|</span> awk <span class=s1>&#39;{print $2}&#39;</span><span class=k>)</span>:0
  <span class=nb>export</span> <span class=nv>LIBGL_ALWAYS_INDIRECT</span><span class=o>=</span><span class=m>0</span> <span class=c1># 这个很关键</span>
  <span class=nb>export</span> <span class=nv>DISPLAY</span><span class=o>=</span><span class=m>127</span>.0.0.1:0.0
</code></pre></div> <strong>TIPS</strong>: 其他类似的操作 ^b17cc1</p> </li> <li> <p>bash下运行gazebo即可显示</p> <p>​ </p> </li> </ul> <p>如果要显示其他界面</p> <ul> <li> <p>显示软件界面，比如geany 安装gcc编辑器gean 然后在window的bash命令终端输入geany，即可在vcxsrv中显示编辑器</p> </li> <li> <p>显示文件管理器nautilus，直接输入nautilus就行了。这个比较合适，在这里面也可以打开geany</p> </li> </ul> <h4 id=ip>以IP模式监听<a class=headerlink href=#ip title="Permanent link">&para;</a></h4> <p>如果在输入ccsm的时候，提示错误<code>AttributeError: 'NoneType' object has no attribute 'get_default_screen'</code>的解决方案：（改成ip模式监听）</p> <ul> <li> <p>首先运行xlaunch的时候加上额外的参数<code>-ac</code>（其他设置和上面的一样）</p> </li> <li> <p>然后在bash下运行<code>export DISPLAY=$(cat /etc/resolv.conf | grep nameserver | awk '{print $2}'):0</code></p> </li> <li> <p>然后继续运行ccsm和compiz</p> </li> </ul> <p><strong>参考资料</strong></p> <ul> <li> <p><a href=https://www.whitewaterfoundry.com/blog/2019/6/12/enable-wsl2-and-convert-existing-pengwin-installations>HOWTO: Enable WSL2 and Convert Existing Pengwin Installations</a></p> </li> <li> <p><a href=https://www.jianshu.com/p/3eeeb866d3b4>Windows使用Linux下编程的IDE</a></p> </li> <li> <p><a href=https://github.com/microsoft/WSL/issues/4106>Can't use X-Server in WSL 2</a></p> </li> <li> <p><a href=https://leibnizhu.gitlab.io/2016/07/16/Bash-on-Windows%E5%BC%80%E5%90%AFUbuntu-unity%E6%A1%8C%E9%9D%A2%E7%9A%84%E6%96%B9%E6%B3%95/ >https://leibnizhu.gitlab.io/2016/07/16/Bash-on-Windows%E5%BC%80%E5%90%AFUbuntu-unity%E6%A1%8C%E9%9D%A2%E7%9A%84%E6%96%B9%E6%B3%95/</a> 目前没采用这种策略</p> </li> <li> <p><a href=https://www.jianshu.com/p/aca81f8c7f08>https://www.jianshu.com/p/aca81f8c7f08</a> 这篇文章对这些命令的含义进行了详细解释。比如echo $DISPLAY -</p> </li> <li> <p>xluanch启动后，右键hide root window不要选中。</p> </li> </ul> <h4 id=_3>其他<a class=headerlink href=#_3 title="Permanent link">&para;</a></h4> <p>c. 其他参考资料: win10创建Ubuntu16.04子系统，安装常用软件以及图形界面（包括win10远程桌面连接Ubuntu）<a href=https://blog.csdn.net/li528405176/article/details/82263534%3e>https://blog.csdn.net/li528405176/article/details/82263534%3e</a></p> <p>设置好以后，每次要进入linux的图形界面的步骤如下： i. 打开xlaunch ii. 在Bash on Ubuntu on Windows界面下输入nautilus（显示文件管理器），直接输入nautilus就行了。这个比较合适，在这里面也可以打开geany</p> <h1 id=_4>不推荐的几种方式<a class=headerlink href=#_4 title="Permanent link">&para;</a></h1> <h2 id=tightvncserver>tightvncserver （不推荐使用）<a class=headerlink href=#tightvncserver title="Permanent link">&para;</a></h2> <p>树莓派安装 <div class=highlight><pre><span></span><code>    sudo apt-get update
    sudo apt-get install tightvncserver
    vncserver :1 -geometry 1920x1080 -depth 24
</code></pre></div></p> <p>会提示 <div class=highlight><pre><span></span><code>    New &#39;X&#39; desktop is ubuntu:1
    Starting applications specified in /home/ubuntu/.vnc/xstartup
</code></pre></div> 并提示设置密码，我的密码为h..1...1 这时候windows下下载<code>tightvnc-2.8.27-gpl-setup-32bit</code>, 连接 <div class=highlight><pre><span></span><code>192.168.1.108:1
密码即可
</code></pre></div> 其他问题 1. 不显示图标：将<code>/home/ubuntu/.vnc/xstartup</code>文件修改为 <div class=highlight><pre><span></span><code>#!/bin/sh

[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresources
xsetroot -solid grey
xterm -geometry 80x24+10+10 -ls -title &quot;$VNCDESKTOP Desktop&quot; &amp;
startxfce4 &amp;
</code></pre></div> 2. 关闭vncservcer： <code>vncserver -kill :1</code></p> <p>参考文献： 1. <a href="https://blog.csdn.net/qq_33446100/article/details/104849614?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-1">https://blog.csdn.net/qq_33446100/article/details/104849614?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-1</a></p> <p>注意:<code>tightvncserver</code>不支持opengl，所以不能显示<code>rosrun rviz rviz</code></p> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; mdeng li </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.sections", "navigation.tabs"], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script> <script src=../../../assets/javascripts/bundle.7353b375.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>